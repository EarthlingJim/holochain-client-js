name: npm tests

on: [ push, pull_request ]

jobs:
 test:
  runs-on: ${{ matrix.os }}
  strategy:
   matrix:
    os: [
     ubuntu-latest,
     macos-latest
    ]
    node: [ '10', '12', '14' ]
  steps:
   - uses: actions/checkout@v2
   - uses: actions/setup-node@v2-beta
     with:
      node-version: ${{ matrix.node }}
   - uses: actions-rs/toolchain@v1
     with:
      toolchain: stable
   - run: ./install-holochain.sh
   - run: ./run-test.sh
   - run: npm run test
